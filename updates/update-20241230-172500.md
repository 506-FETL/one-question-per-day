# GitHub Actions pnpm 支持修复

## 修复的问题

修复了 GitHub Actions 工作流中的 pnpm 可执行文件找不到的问题："Unable to locate executable file: pnpm"。

## 根本原因

在 GitHub Actions 中，必须先安装 pnpm，然后再配置 Node.js 的 cache。原来的配置顺序是：

1. Setup Node.js (with cache: 'pnpm')
2. Setup pnpm

这导致 Node.js 试图使用 pnpm 缓存，但此时 pnpm 还没有安装。

## 解决方案

调整了两个工作流文件中的步骤顺序：

### `.github/workflows/manual-release.yaml`

```yaml
- name: Setup pnpm
  uses: pnpm/action-setup@v4
  with:
    version: 10

- name: Setup Node
  uses: actions/setup-node@v4
  with:
    node-version: '20'
    cache: 'pnpm'
```

### `.github/workflows/run-test.yaml`

```yaml
- name: Setup pnpm
  uses: pnpm/action-setup@v4
  with:
    version: 10

- name: Setup Node
  uses: actions/setup-node@v4
  with:
    node-version: '20'
    cache: 'pnpm'
```

## 影响范围

- ✅ 手动发布工作流 (`manual-release.yaml`)
- ✅ PR 测试工作流 (`run-test.yaml`)
- ✅ 保持了缓存优化（pnpm 缓存仍然启用）
- ✅ 保持了版本锁定（pnpm@10.12.1）

## 验证步骤

修复后，GitHub Actions 应该能够：

1. 正确安装 pnpm
2. 设置 Node.js 并使用 pnpm 缓存
3. 成功运行 `pnpm install --frozen-lockfile`
4. 执行测试和发布任务

这个修复确保了多人协作环境下的 CI/CD 流水线能够正常工作。
